name: Java CI/CD for coworking_space_reservation

on:
  push:
    branches: [ "feature-branch-13" ]     # üîπ –ó–∞–ø—É—Å–∫ workflow –ø—Ä–∏ –ª—é–±–æ–º –ø—É—à–µ –≤ –≤–µ—Ç–∫—É "feature-branch-13"
  pull_request:
    branches: [ "feature-branch-13" ]     # üîπ –ó–∞–ø—É—Å–∫ workflow –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ pull request –≤ –≤–µ—Ç–∫—É "feature-branch-13"

jobs:                                     # üî∏ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–¥–∞–Ω–∏–π (jobs) –≤ workflow
  build:                                  # üîπ –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è (–º–æ–∂–Ω–æ –ª—é–±–æ–µ)

    runs-on: ubuntu-latest                # üîπ GitHub Actions –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É —Å Ubuntu –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏

    steps:                                # üîπ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —à–∞–≥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ job
      - name: Checkout code               # üü© –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É
        uses: actions/checkout@v4         # ‚û°Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–æ—Ç–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ `checkout` –≤–µ—Ä—Å–∏–∏ 3

      - name: Setup Java 19               # üü© –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Java 19
        uses: actions/setup-java@v4      # ‚û°Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–æ—Ç–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ `setup-java` –≤–µ—Ä—Å–∏–∏ 3
        with:
          distribution: temurin           # üî∏ –í—ã–±–æ—Ä –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞ JDK ‚Äî Temurin (—Ä–∞–Ω–µ–µ AdoptOpenJDK)
          java-version: 19                # üî∏ –í–µ—Ä—Å–∏—è Java ‚Äî 19

      - name: Build with Maven            # üü© –®–∞–≥ 3: –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å –ø–æ–º–æ—â—å—é Maven
        run: mvn clean package -B         # ‚û°Ô∏è –ó–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã `mvn clean package`, `-B` ‚Äî "batch mode", –æ—Ç–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

      - name: Upload UI jar artifact      # üü© –®–∞–≥ 4: –ó–∞–≥—Ä—É–∑–∫–∞ .jar —Ñ–∞–π–ª–∞ –∫–∞–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ (—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å–±–æ—Ä–∫–∏)
        uses: actions/upload-artifact@v4  # ‚û°Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (v4 ‚Äî –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è)
        with:
          name: ui-jar                    # üî∏ –ù–∞–∑–≤–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ (–º–æ–∂–µ—à—å –Ω–∞–∑–≤–∞—Ç—å –∫–∞–∫ —É–≥–æ–¥–Ω–æ)
          path: ui/target/*.jar           # üî∏ –ü—É—Ç—å –∫ .jar —Ñ–∞–π–ª—É, —Å–æ–±—Ä–∞–Ω–Ω–æ–º—É –∏–∑ –º–æ–¥—É–ª—è `ui`

      - name: Build UI Docker image       # üü© –®–∞–≥ 5: –°–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞
        run: docker build -t coworking-ui ./ui   # ‚û°Ô∏è –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ Docker build –≤ –ø–∞–ø–∫–µ `ui`, —Å —Ç–µ–≥–æ–º `coworking-ui`

      # - name: Run docker-compose        # üü® –®–∞–≥ 6 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –∑–∞–ø—É—Å–∫ docker-compose, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –ø–æ–¥–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏
      #   run: docker-compose up -d       # ‚û°Ô∏è –≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –ø–æ–∫–∞ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞; –º–æ–∂–Ω–æ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
